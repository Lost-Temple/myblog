---
title: Linux-权限解析
tags:
  - 权限
  - 权限类型
  - 权限粒度
categories:
  - Linux
cover: 'https://s2.loli.net/2023/01/09/7BVLPKytReJW4UX.jpg'
abbrlink: 40941
date: 2023-01-09 16:03:36
---

# 权限简介
Linux系统上对文件的权限有着严格的控制，如果想对某个文件执行某种操作，必须具有对应的权限方可执行成功。Linux下文件的`权限类型`一般包括：读，写，执行。对应字母为：r、w、x。
Linux下`权限粒度`有：拥有者、群组、其它组三种。每个文件都可以针对三个粒度，设置不同的rwx(读写执行)权限。通常情况下，一个文件只能归属于一个用户和组， 如果其它的用户想有这个文件的权限，则可以将该用户加入具备权限的群组，一个用户可以同时归属于多个组。
Linux上通常使用chmod命令对文件的权限进行设置和更改。

# 更改文件权限
`chmod`命令
## 命令格式
```shell
chmod [可选项] <mode> <file...>
```
## 示例
设置所有用户可读取`a.conf`
```shell
chmod a+r a.conf    # a表示所有（用户、群组、其它组），+r表示读取权限
```
或
```shell
chmod ugo+r a.conf   # ugo3个字母分别表示用户，群组、其它组，+r表示读取权限
```

设置`b.sh`只有拥有者（即`u`)有读写、执行权限
```shell
chmod u+rwx b.sh 
```

设置文件`a.conf`与`c.xml`权限为拥有者与其所属同一个群组可读写，其它组可读不可写
```shell
chmod a+r,ug+w,o-w a.conf c.xml
```

设置当前目录下的所有档案与子目录皆设为任何人可读写
```shell
chmod -R a+rw *
```
---
## 数字权限使用格式
在这种使用方式中，首先我们需要了解数字如何表示权限。 首先，我们规定数字`4`、`2`和`1`表示读、写、执行权限，即`r=4`，`w=2`，`x=1` 。此时其他的权限组合也可以用其他的八进制数字表示出来，

如：

rwx = 4 + 2 + 1 = 7

rw = 4 + 2 = 6

rx = 4 +1 = 5

即

若要同时设置 rwx (可读写运行） 权限则将该权限位 设置 为 4 + 2 + 1 = 7

若要同时设置 rw- （可读写不可运行）权限则将该权限位 设置 为 4 + 2 = 6

若要同时设置 r-x （可读可运行不可写）权限则将该权限位 设置 为 4 +1 = 5

上面我们提到，每个文件都可以针对三个粒度，设置不同的rwx(读写执行)权限。即我们可以用用三个`8进制数字`分别表示`拥有者`、`群组`、`其它组`( u、 g 、o)的权限详情，并用chmod直接加三个`8进制`数字的方式直接改变文件权限。语法格式为：
```shell
chmod <abc> file...
```
```
其中a,b,c各为一个数字，分别代表User、Group、及Other的权限。相当于简化版的
chmod u=权限,g=权限,o=权限 file...
而此处的权限将用8进制的数字来表示User、Group、及Other的读、写、执行权限
```

## 示例
设置所有人可以读写及执行
```shell
chmod 777 a.sh # (等价于  chmod u=rwx,g=rwx,o=rwx a.sh 或  chmod a=rwx a.sh)
```

设置拥有者可读写，其他人不可读写执行
```shell
chmod 600 a.sh (等价于chmod u=rw,g=---,o=--- a.sh 或 chmod u=rw,go-rwx a.sh)
```

| 权限 | 8进制值 | 描述 |
| -- | -- | -- |
| --- | 0 | 没有任何权限 |
| --x | 1 | 只有执行权限 |
| -w- | 2 | 只有写入权限 |
| -wx | 3 | 有写入和执行权限 |
| r-- | 4 | 有读取权限 |
| r-x | 5 | 有读取和执行权限 |
| rw- | 6 | 有读取和写入权限 |
| rwx | 7 | 有全部权限 |

> 注：权限rwx3个“位”，值分别是4，2，1 对应的二进制值为 100，010，001。设计成这样的值方便进行“位或”操作（其实就相当于+）。用这样的设计，在进行位或操作时，就能形成不会重复的结果分别用来表示不同的组合。